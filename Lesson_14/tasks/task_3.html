<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <title>Lesson 14</title>
  </head>

  <body>
    <h1>Задача 3</h1>
    <div>
      <h3><a href="../index.html">Повернутися до головної сторінки з усіма ДЗ.</a></h3>
      <h4><b>Завдання:</b></h4>
      <p>Ось приклад відповіді з одного з сайтів (масив об’єктів з інформацією про товари)</p>
      <img src="../img/3.png" alt="#" /><br />
      <img src="../img/2.png" alt="#" />
    </div>
    <script src="../js/script.js"></script>
    <script>
      //Вводимо необхідні дані
      console.log(dataList)
      //1.Загальну вартість (нові ціни - price) всюди rests = -1, тому просто сумую прайси
      const totalPrice = dataList.reduce((total, productN) => productN.price + total, 0)
      //виводимо результат
      document.write(`1.Загальну вартість (нові ціни - price) = ${totalPrice}<br><br>`)

      //2.Знайти кількість товарів, у яких ціна зменшилась (price < old_price).
      const amountChangedPrice = dataList.reduce((counter, productN) => (productN.price < productN.old_price ? counter + 1 : counter), 0)
      //виводимо результат
      document.write(`2.Знайти кількість товарів, у яких ціна зменшилась (price < old_price). = ${amountChangedPrice}<br><br>`)

      //3.Товари, які доступні (sell_status:"available")
      const availableProductID = dataList.filter((prod) => prod.sell_status === "available")
      //виводимо результат
      document.write(`3.Товари, які доступні (sell_status:"available") = <br>`)
      for (let element of availableProductID) {
        document.write(`${element.id}<br>`)
      }

      //4.сформувати новий список обєктів тільки доступних для продажу товарів, які міститимуть тільки ідентифікатор товару (id), нову ціну (price), стару ціну (old_price), та ціну у доларах (usd_price)
      const availableProducts = dataList.reduce((avalibleList, prod) => {
        if (prod.sell_status === "available") {
          let { id, price, old_price, usd_price } = prod
          avalibleList.push({ id, price, old_price, usd_price })
        }
        return avalibleList
      }, [])
      //виводимо результат
      document.write(`<br>4.Cформувати новий список обєктів тільки доступних для продажу товарів, які міститимуть тільки ідентифікатор товару (id), нову ціну (price), стару ціну (old_price), та ціну у доларах (usd_price): <br>`)
      for (let prod of availableProducts) {
        document.write(`${JSON.stringify(prod)}<br>`)
      }
    </script>
  </body>
</html>
